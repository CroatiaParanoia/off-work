
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="./css/flipclock.css">
    <link rel="stylesheet" href="./css/style.css">

    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> -->

    <script src="./js/jquery.min.js"></script>
    <script src="./js/flipclock.js"></script>
</head>
<body>

<div id="box">
    <div id="content">
        <h1 class="title">距离18:00下班还剩</h1>
        <br>
        <div class="clock" id="flipclock"></div>
        <h2 class="date" id='ShowDate'></h2>
    </div>
</div>

<script type="text/javascript">
    // mobile
    if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
        document.getElementById('flipclock').setAttribute("style","zoom:1.5;");
        document.getElementById('ShowDate').setAttribute("style","zoom:1.5;");
    }

    var clock;

    $(document).ready(function() {
        const now = new Date()
        const offWork = new Date()
        offWork.setHours(18, 0, 0)
        const diff = (offWork.getTime() - now.getTime()) / 1000

        console.log({ now, offWork, diff }, 'diff')
        clock = $('.clock').FlipClock(diff, {
            clockFace: 'HourlyCounter',
            // clockFace: 'TwelveHourClock',
            countdown: true,
            autoStart: true,
            showSeconds: true,
            callbacks: {
                start: function () {
                    $('.message').html('The clock has started!');
                }
            }
        })
    });
    // var month = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'June', 'July', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];
    // var week = ['Mon', 'Tues', 'wed', 'Thur', 'Fri', 'Sat', 'Sun'];
    var d = new Date();
    document.getElementById('ShowDate').innerHTML = d.getFullYear() + "年" +(d.getMonth() + 1) + "月" + d.getDate() + "日" + ' 星期'+'日一二三四五六'.charAt(new Date().getDay());
    // document.getElementById('ShowDate').innerHTML = d.getFullYear() + "-" + month[d.getMonth()] + "-" + d.getDate() + ', ' + week[d.getDay()];
</script>

</body>
</html>
